{% extends 'stats/base.html' %}


{% block content %}

<div class="container">
    <div class="podium__container podium">
        <div class="podium__item">
            <p id="podium_second" class="podium__city" data-animationClass="podium__city-animation">
                {% for institutionRanking in institutionRankings %}
                    {% if institutionRanking.rank == 2 %}
                        {{ institutionRanking.institution }} <br>
                    {% endif %}
                {% endfor %}
            </p>
            <div class="podium__rank second"
                onclick="AnimationController.startAnimation('podium_second'); document.getElementById('podium_second').style.visibility = 'visible';">
                2</div>
        </div>
        <div class="podium__item">
            <p id="podium_first" class="podium__city" data-animationClass="podium__city-animation">
                {% for institutionRanking in institutionRankings %}
                    {% if institutionRanking.rank == 1 %}
                        {{ institutionRanking.institution }} <br>
                    {% endif %} 
                {% endfor %}
            </p>
            <div class="podium__rank first"
                onclick="AnimationController.startAnimation('podium_first'); document.getElementById('podium_first').style.visibility = 'visible';">
                1</div>
        </div>
        <div class="podium__item">
            <p id="podium_third" class="podium__city" data-animationClass="podium__city-animation">
                {% for institutionRanking in institutionRankings %}
                    {% if institutionRanking.rank == 3 %}
                        {{ institutionRanking.institution }} <br>
                    {% endif %}
                {% endfor %}
            </p>
            <div class="podium__rank third"
                onclick="AnimationController.startAnimation('podium_third'); document.getElementById('podium_third').style.visibility = 'visible';">
                3</div>
        </div>
    </div>

    <button class="custom_button" onclick="showRest()">
        Show rest
    </button>

    <div class="ranking" id="ranking_rest" style="display: none;">
        {% for institutionRanking in institutionRankings %}
        {% if institutionRanking.rank > -1 %}
        <p>{{ institutionRanking.rank }} : {{ institutionRanking.institution.name }} avec une moyenne de {{ institutionRanking.avg_score|floatformat:2 }} points et {{ institutionRanking.avg_time|floatformat:2 }} s </p>
        {% endif %}
        {% endfor %}
    </div>

    <script>
        function showRest() {
            var x = document.getElementById("ranking_rest");
            if (x.style.display === "none") {
                x.style.display = "flex";
            } else {
                x.style.display = "none";
            }
        }
    </script>

</div>

{% endblock %}